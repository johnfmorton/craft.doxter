!function($){$.caretTo=function(el,index){if(el.createTextRange){var range=el.createTextRange();range.move("character",index),range.select()}else null!=el.selectionStart&&(el.focus(),el.setSelectionRange(index,index))},$.caretPos=function(el){if("selection"in document){var range=el.createTextRange();try{range.setEndPoint("EndToStart",document.selection.createRange())}catch(e){return 0}return range.text.length}return null!=el.selectionStart?el.selectionStart:void 0},$.fn.caret=function(index,offset){return"undefined"==typeof index?$.caretPos(this.get(0)):this.queue(function(next){if(isNaN(index)){var i=$(this).val().indexOf(index);offset===!0?i+=index.length:"undefined"!=typeof offset&&(i+=offset),$.caretTo(this,i)}else $.caretTo(this,index);next()})},$.fn.caretToStart=function(){return this.caret(0)},$.fn.caretToEnd=function(){return this.queue(function(next){$.caretTo(this,$(this).val().length),next()})},$.fn.insertAtCaret=function(myValue){var obj;if(obj="undefined"!=typeof this[0].name?this[0]:this,$.browser.msie)obj.focus(),sel=document.selection.createRange(),sel.text=myValue,obj.focus();else if($.browser.mozilla||$.browser.webkit){var startPos=obj.selectionStart,endPos=obj.selectionEnd,scrollTop=obj.scrollTop;obj.value=obj.value.substring(0,startPos)+myValue+obj.value.substring(endPos,obj.value.length),obj.focus(),obj.selectionStart=startPos+myValue.length,obj.selectionEnd=startPos+myValue.length,obj.scrollTop=scrollTop}else obj.value+=myValue,obj.focus()}}(jQuery);